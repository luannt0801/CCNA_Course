# 1-8-2024 | EIRGP và OSPF

# 1. EIGRP

Các cái có ip router là EIGRP, OSPF, BSP, …

Loopback 0

trong trường hợp có nhiều interface Loopback (1,2,3 …) có nhiều IP thì sẽ lấy cái IP cao nhất làm EI

⇒ Interface loopback ko phụ thuộc vào lỗi phần cứng làm router ID

> Router – id trên router chạy OSPF có định dạng của một địa chỉ IP. Mặc định, tiến trình OSPF trên mỗi router sẽ tự động bầu chọn giá trị router – id là **địa chỉ IP cao nhất trong các interface đang active, ưu tiên cổng loopback**.
> 

Link - state ( up/down, trạng thái)

→ Có bảng link-state → tự router tính toán khoảng cách

—> Bảng topology  —> tính toán quãng đường, dự phòng đường lỗi.

distance vector —> tệ vờ lờ 🙂

## IGP và EGP ( định tuyến trong và định tuyến ngoài protocol)

IGP: EIRGP, OSPF, ISIS

EGP: BGP, EGP

## Classless và class full

Classless mang thông tin về các subnet mask. Topo có nhiều subnetmassk → vis

Classfull thì nhược điểm là các class mask phải có giá trị giống nhau.

## Giá trị AD - administrative Distance

AD càng nhỏ càng tin cậy, từ 0-255

Với EIGRP thì AD = 90

RIPv1 thì AD = 120

Đối với multiple routing protocols router thì giá trị AD được cấu hình trên từng AD nhằm giúp lựa chọn con đường ngắn nhất theo từ protocol.

BGP: 20 & 200

EIRGP là 224.0.0.X X = 10

RIP X = 9

dùng để cập nhật các định tuyến.

## EIRGP path selection

Route tốt nhất là Successor - S

backup router - SS  | không phải tốt nhaast nhưng dùng để backup.

AD/RD - là  advertised distance/reported distance 

FD = AD + Metric

![Untitled](1-8-2024%20EIRGP%20va%CC%80%20OSPF%2070fcd9cbc04a4763a3622f682a604d26/Untitled.png)

> AD của FS < FD của S để tránh loop free
> 

AS number

# 2. OSPF

Việc chia OSPF thành nhiều area mang lại các lợi ích sau:

- **Giảm tải xử lý**: Việc chia mạng thành các khu vực giúp giảm tải xử lý cho các router bằng cách giảm số lượng thông tin định tuyến cần phải xử lý.
- **Quản lý dễ dàng hơn**: Mạng được phân chia thành các khu vực nhỏ hơn và rõ ràng hơn, giúp dễ dàng quản lý và xử lý sự cố.
- **Tối ưu hóa băng thông**: Giảm lượng băng thông sử dụng cho việc cập nhật thông tin định tuyến, do các router trong một khu vực chỉ cần biết các tuyến đường trong khu vực đó và các tuyến đường tóm tắt từ các khu vực khác thông qua border router.
- **Tăng cường bảo mật**: Hạn chế chia sẻ routing giữa khu vực khác nhau từ đó giảm nguy cơ tấn công, lộ thông tin nhạy cảm.

**Area 0 (Backbone Area):**

- **Area 0**, còn được gọi là **Backbone Area**, là khu vực trung tâm và quan trọng nhất trong OSPF. Tất cả các khu vực khác phải kết nối trực tiếp hoặc gián tiếp với Area 0 để có thể trao đổi thông tin định tuyến lẫn nhau. (vì nếu không có area 0 thì các router chỉ trao đổi thông định tuyến giữa các router trong cùng một area)
- Backbone Area là cầu nối truyền tải thông tin định tuyến giữa các khu vực khác nhau trong mạng OSPF, đảm bảo rằng tất cả các khu vực có thể giao tiếp với nhau.

**Non-backbone Areas**

Các khu vực ngoài Backbone Area (Area 0) được gọi là Non-backbone Areas. Các loại Non-backbone Areas bao gồm:

- **Standard Area**: Đây là loại khu vực thông thường, không có bất kỳ hạn chế nào về việc chấp nhận các loại thông tin định tuyến.
- **Stub Area**: được thiết kế để giảm lượng thông tin định tuyến bên ngoài cần được lưu trữ và xử lý trong khu vực. Một Stub Area không chấp nhận các external route (các tuyến đường từ các Autonomous System khác), chỉ chấp nhận một tuyến mặc định duy nhất từ các ABR.
- **Totally Stubby Area (TSA)**: Đây là một dạng mở rộng của Stub Area, trong đó không chỉ chặn các external route mà còn chặn luôn các summary route từ các khu vực khác. Chỉ có một tuyến mặc định duy nhất được quảng bá trong Totally Stubby Area.
- **Not-so-stubby Area (NSSA)**: là một biến thể của Stub Area, cho phép nhận các external route thông qua các bộ định tuyến biên (ASBRs). Điều này giúp NSSA duy trì một số tính năng của Stub Area trong khi vẫn cho phép định tuyến động từ các nguồn bên ngoài.